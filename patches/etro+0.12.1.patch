diff --git a/node_modules/etro/dist/etro-cjs.js b/node_modules/etro/dist/etro-cjs.js
index 559e445..8e85ae8 100644
--- a/node_modules/etro/dist/etro-cjs.js
+++ b/node_modules/etro/dist/etro-cjs.js
@@ -16,6 +16,81 @@ PERFORMANCE OF THIS SOFTWARE.
 ***************************************************************************** */
 /* global Reflect, Promise */
 
+if (typeof document === 'undefined' && typeof globalThis !== 'undefined') {
+    globalThis.document = {
+      createElement: function(tag) {
+        if (tag === 'canvas') {
+          return new OffscreenCanvas(1, 1);
+        }
+        if (tag === 'img') {
+          return new Image();
+        }
+        if (tag === 'video') {
+          return {
+            src: '',
+            duration: 0,
+            preload: 'metadata',
+            onloadedmetadata: null,
+            onerror: null,
+            addEventListener: function() {},
+            removeEventListener: function() {}
+          };
+        }
+        if (tag === 'audio') {
+          return {
+            src: '',
+            addEventListener: function() {},
+            removeEventListener: function() {}
+          };
+        }
+        if (tag === 'div') {
+          return {
+            style: {},
+            appendChild: function() {},
+            removeChild: function() {}
+          };
+        }
+        if (tag === 'span') {
+          return {
+            style: {},
+            appendChild: function() {},
+            removeChild: function() {}
+          };
+        }
+        return {};
+      },
+      fonts: {
+        load: function() { return Promise.resolve(); },
+        ready: Promise.resolve()
+      },
+      body: {
+        appendChild: function() {},
+        removeChild: function() {}
+      }
+    };
+  }
+  
+  // Add AudioContext polyfill for workers
+if (typeof AudioContext === 'undefined' && typeof globalThis !== 'undefined') {
+  if (typeof OfflineAudioContext !== 'undefined') {
+    // Use OfflineAudioContext as AudioContext in workers
+    globalThis.AudioContext = OfflineAudioContext;
+    // Also set it on self (workers use self as global)
+    if (typeof self !== 'undefined') {
+      self.AudioContext = OfflineAudioContext;
+    }
+    // Also set it on window if it exists (for compatibility)
+    if (typeof window !== 'undefined') {
+      window.AudioContext = OfflineAudioContext;
+    }
+  } else {
+    // Fallback: create a minimal AudioContext polyfill
+    globalThis.AudioContext = function AudioContextPolyfill() {
+      throw new Error('AudioContext is not available in this worker context. OfflineAudioContext is required.');
+    };
+  }
+}
+
 var extendStatics = function(d, b) {
     extendStatics = Object.setPrototypeOf ||
         ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
@@ -519,7 +594,11 @@ var Color = /** @class */ (function () {
     };
     return Color;
 }());
-var parseColorCanvas = document.createElement('canvas');
+
+var parseColorCanvas = (typeof OffscreenCanvas !== 'undefined') 
+  ? new OffscreenCanvas(1, 1) 
+  : document.createElement('canvas');
+
 parseColorCanvas.width = parseColorCanvas.height = 1;
 var parseColorCtx = parseColorCanvas.getContext('2d');
 /**
